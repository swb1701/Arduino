// scrolltext demo for Adafruit RGBmatrixPanel library.
// Demonstrates double-buffered animation on our 16x32 RGB LED matrix:
// http://www.adafruit.com/products/420

// Written by Limor Fried/Ladyada & Phil Burgess/PaintYourDragon
// for Adafruit Industries.
// BSD license, all text above must be included in any redistribution.

// Logo and Customization Example by Scott Bennett

#include <Adafruit_GFX.h>   // Core graphics library
#include <RGBmatrixPanel.h> // Hardware-specific library
#include <avr/pgmspace.h>

// Similar to F(), but for PROGMEM string pointers rather than literals
#define F2(progmem_ptr) (const __FlashStringHelper *)progmem_ptr

#define CLK 8  // MUST be on PORTB! (Use pin 11 on Mega)
#define LAT A3
#define OE  9
#define A   A0
#define B   A1
#define C   A2
// Last parameter = 'true' enables double-buffering, for flicker-free,
// buttery smooth animation.  Note that NOTHING WILL SHOW ON THE DISPLAY
// until the first call to swapBuffers().  This is normal.
RGBmatrixPanel matrix(A, B, C, CLK, LAT, OE, true);
// Double-buffered mode consumes nearly all the RAM available on the
// Arduino Uno -- only a handful of free bytes remain.  Even the
// following string needs to go in PROGMEM:

int off=32;
int mode=0;
const char str[] PROGMEM = "CSRA RAD Team Lab                ";
const char str2[] PROGMEM = "Visit our website at srarad.com";
int    textX   = matrix.width(),
  textMin = sizeof(str) * -12,
  textMin2 = sizeof(str2) * -12,
  hue     = 0;
int8_t ball[3][4] = {
  {  3,  0,  1,  1 }, // Initial X,Y pos & velocity for 3 bouncy balls
  { 17, 15,  1, -1 },
  { 27,  4, -1,  1 }
};
static const uint16_t PROGMEM ballcolor[3] = {
  0x0080, // Green=1
  0x0002, // Blue=1
  0x1000  // Red=1
};

const unsigned char PROGMEM rad_logo[] = {
  0,0,0,0,0,0,91,5,5,211,4,4,93,3,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,36,3,3,249,2,2,255,0,0,249,1,1,37,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,142,3,4,255,0,0,144,3,4,68,8,78,100,8,57,1,1,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,220,4,5,222,3,4,4,1,1,5,5,195,0,0,255,3,3,240,4,4,177,5,5,90,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,21,4,4,255,0,0,137,4,4,0,0,0,6,6,195,19,12,64,23,9,62,4,4,103,3,3,214,5,5,122,0,0,0,0,0,0,1,1,6,3,3,19,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,59,4,4,255,0,0,81,4,5,0,0,0,6,6,195,6,6,41,19,5,5,0,0,0,5,5,45,4,4,217,0,0,0,0,0,0,4,4,65,4,4,242,5,5,84,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,83,5,5,255,0,0,47,3,3,0,0,0,7,7,195,4,4,45,9,1,1,0,0,0,5,5,50,4,4,221,0,0,0,0,0,0,5,5,131,7,7,102,7,7,188,0,0,0,0,0,0,6,6,211,5,5,160,4,4,92,4,4,24,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,95,4,4,255,0,0,31,2,3,0,0,0,7,7,196,5,5,165,4,4,155,4,4,166,3,3,229,5,5,99,0,0,0,0,0,0,5,5,193,4,4,18,5,5,148,4,4,58,0,0,0,9,9,220,4,4,24,4,4,85,6,6,153,8,8,174,4,4,135,5,5,64,1,1,5,0,0,0,94,3,3,255,0,0,32,3,3,0,0,0,7,7,196,5,5,172,5,4,134,3,3,226,7,7,104,0,0,0,0,0,0,2,2,9,4,4,234,5,5,142,7,7,178,5,5,179,0,0,0,8,8,218,0,0,0,0,0,0,3,3,15,4,4,72,8,8,167,6,6,223,7,7,151,5,5,31,81,4,5,255,0,0,50,4,4,0,0,0,8,8,196,3,3,54,10,2,2,4,4,53,3,3,242,3,3,35,0,0,0,4,4,69,5,5,173,4,4,22,2,2,4,6,6,179,4,4,54,4,4,214,5,5,172,8,8,180,6,6,155,4,4,94,4,4,33,0,0,0,0,0,0,0,0,0,56,5,5,255,0,0,86,4,4,0,0,0,8,8,196,6,6,61,19,7,7,0,0,0,5,5,155,4,4,168,0,0,0,4,4,138,4,4,95,0,0,0,0,0,0,4,4,57,6,6,111,5,5,70,4,4,27,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16,3,3,254,1,1,145,4,5,0,0,0,8,8,197,25,8,63,17,4,5,0,0,0,3,3,23,3,3,236,4,4,65,8,8,168,3,3,31,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,212,4,5,231,3,3,9,2,2,6,6,194,77,9,69,0,0,0,0,0,0,0,0,0,4,4,41,3,3,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,131,4,4,255,0,0,169,3,4,94,7,102,107,6,32,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,26,2,3,242,2,2,255,0,0,243,2,2,26,2,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,68,4,4,181,3,4,69,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
  /*
    0,0,0,0,0,0,68,76,91,155,173,209,68,76,92,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,27,30,36,181,203,245,185,208,251,181,204,246,28,31,37,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,104,117,140,185,208,251,105,118,142,53,59,98,76,85,121,1,1,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,161,181,217,162,182,219,3,4,4,10,10,87,6,6,109,8,8,105,8,8,79,7,7,42,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16,18,21,185,208,251,100,112,135,0,0,0,10,10,88,19,19,43,21,22,47,7,7,48,8,8,94,8,8,57,0,0,0,0,0,0,1,1,3,4,4,11,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,44,49,59,185,208,251,60,67,81,0,0,0,11,11,88,6,6,22,16,17,19,0,0,0,6,6,23,9,9,96,0,0,0,0,0,0,5,5,31,9,9,106,7,7,40,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,62,69,83,185,208,251,35,39,47,0,0,0,11,11,88,5,5,22,7,8,8,0,0,0,6,6,26,9,9,98,0,0,0,0,0,0,8,8,60,10,10,49,11,11,86,0,0,0,0,0,0,11,11,96,8,8,72,6,6,43,4,4,13,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,70,78,94,185,208,251,23,26,31,0,0,0,11,11,88,9,9,75,8,8,70,8,8,74,9,9,101,7,7,46,0,0,0,0,0,0,10,10,87,4,4,11,8,8,67,6,6,28,0,0,0,14,14,101,4,4,13,6,6,40,9,9,70,12,12,81,7,7,61,6,6,31,1,1,3,0,0,0,69,77,93,185,208,251,24,27,32,0,0,0,12,12,88,9,9,78,7,7,61,8,8,99,10,10,51,0,0,0,0,0,0,2,2,5,10,10,104,8,8,65,11,11,82,9,9,81,0,0,0,13,13,100,0,0,0,0,0,0,3,3,9,6,6,34,12,12,78,11,11,100,10,10,70,6,6,17,60,67,81,185,208,251,38,42,50,0,0,0,12,12,89,4,4,25,8,9,10,5,5,26,8,8,105,4,4,18,0,0,0,6,6,33,9,9,78,5,5,13,2,2,3,10,10,81,5,5,26,9,9,95,9,9,78,12,12,83,10,10,71,6,6,44,5,5,18,0,0,0,0,0,0,0,0,0,42,46,55,185,208,251,64,71,85,0,0,0,13,13,89,8,8,30,16,18,20,0,0,0,8,8,70,8,8,75,0,0,0,7,7,62,6,6,44,0,0,0,0,0,0,5,5,27,9,9,52,7,7,34,5,5,15,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,13,14,16,185,207,250,107,120,144,0,0,0,13,13,89,22,23,51,13,15,17,0,0,0,3,3,12,8,8,103,6,6,31,12,12,78,4,4,16,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,155,174,210,169,189,228,7,8,9,10,10,86,60,66,103,0,0,0,0,0,0,0,0,0,5,5,21,3,3,11,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,96,108,130,185,208,251,123,138,166,73,81,135,80,89,117,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,19,21,26,176,198,239,185,208,251,176,198,239,20,22,26,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,51,57,68,132,149,179,51,57,68,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
  */
};

const unsigned char PROGMEM csra_logo[] = {
  0,0,0,0,0,0,0,0,0,3,4,25,6,8,134,6,7,211,4,5,248,1,1,253,6,8,239,6,7,189,7,8,102,1,2,6,0,0,0,0,0,0,0,0,0,5,6,45,5,7,162,5,7,226,9,10,251,5,6,235,6,7,193,6,7,116,4,4,18,0,0,0,0,0,0,8,11,147,4,6,192,4,6,192,4,6,192,4,6,192,4,6,192,4,6,192,6,7,185,6,7,137,6,7,44,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,10,9,11,212,7,9,222,7,9,222,6,7,48,10,12,116,7,9,222,7,9,222,7,9,222,7,9,222,7,9,222,7,9,222,7,9,222,5,7,47,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,6,7,89,3,4,242,0,0,255,0,0,255,0,0,255,0,0,255,0,0,255,0,0,255,0,0,255,5,6,211,4,5,36,0,0,0,4,6,73,2,3,248,0,0,255,0,0,255,0,0,255,0,0,255,0,0,255,0,0,255,3,4,237,7,8,82,0,0,0,7,9,195,0,0,255,0,0,255,0,0,255,0,0,255,0,0,255,0,0,255,0,0,255,0,0,255,1,2,252,7,9,120,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,6,7,100,0,0,255,0,0,255,0,0,255,6,7,155,5,6,34,1,2,252,0,0,255,0,0,255,0,0,255,0,0,255,0,0,255,0,0,255,6,8,155,0,0,0,14,8,8,15,8,8,15,8,8,15,8,8,2,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,7,8,89,1,1,254,0,0,255,0,0,255,0,0,255,6,7,232,5,6,218,2,3,249,0,0,255,0,0,255,0,0,255,7,8,97,2,3,8,5,5,234,0,0,255,0,0,255,3,4,234,4,5,193,6,7,225,0,0,255,0,0,255,1,2,253,6,7,62,0,0,0,7,9,195,0,0,255,0,0,255,1,2,255,2,2,255,2,2,255,1,2,254,0,0,255,0,0,255,0,0,255,0,1,254,7,8,68,0,0,0,0,0,0,0,0,0,1,1,1,6,7,208,0,0,255,0,0,255,0,0,255,3,3,245,4,5,19,7,8,179,0,0,255,0,0,255,0,0,255,0,0,255,0,0,255,0,0,255,3,4,245,3,4,18,183,7,7,255,0,0,255,0,0,255,0,0,91,7,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,4,25,3,4,242,0,0,255,0,0,255,4,5,217,7,8,62,1,1,1,0,0,0,3,4,15,6,8,123,2,3,248,7,9,137,0,0,0,5,7,64,0,0,255,0,0,255,5,6,221,3,3,11,0,0,0,1,1,1,6,8,56,7,8,189,7,8,139,0,0,0,0,0,0,7,9,195,0,0,255,0,0,255,10,12,79,9,9,10,9,9,10,7,7,10,7,8,57,4,5,217,0,0,255,0,0,255,6,7,167,0,0,0,0,0,0,0,0,0,6,7,61,0,0,255,0,0,255,2,2,253,0,0,255,0,0,255,6,8,117,5,6,53,4,6,146,4,6,146,4,6,146,4,6,146,4,6,146,4,6,146,4,6,146,5,7,53,74,6,6,255,0,0,255,0,0,255,0,0,196,7,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,7,8,133,0,0,255,0,0,255,4,4,237,4,5,27,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,6,7,43,1,1,2,0,0,0,3,4,78,0,0,255,0,0,255,6,7,220,2,3,9,0,0,0,0,0,0,0,0,0,1,1,1,2,2,5,0,0,0,0,0,0,7,9,195,0,0,255,0,0,255,4,6,72,0,0,0,0,0,0,0,0,0,0,0,0,7,8,95,0,0,255,0,0,255,3,4,204,0,0,0,0,0,0,0,0,0,6,7,169,0,0,255,0,0,255,12,14,122,1,1,254,0,0,255,5,6,222,1,1,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,1,1,220,6,6,255,0,0,255,0,0,255,1,1,47,6,6,0,0,0,0,0,0,0,0,0,0,0,0,6,7,210,0,0,255,0,0,255,6,7,129,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,6,7,42,0,0,255,0,0,255,0,0,255,5,6,227,6,8,136,6,7,64,3,3,7,0,0,0,0,0,0,0,0,0,0,0,0,7,9,195,0,0,255,0,0,255,4,6,72,0,0,0,0,0,0,0,0,0,0,0,0,7,8,96,0,0,255,0,0,255,5,6,198,0,0,0,0,0,0,5,6,28,2,3,250,0,0,255,5,6,225,2,2,4,6,8,194,0,0,255,0,0,255,7,8,79,58,8,8,160,8,8,160,8,8,160,8,8,160,9,9,160,11,11,160,11,11,160,11,11,63,7,7,62,3,3,109,0,0,109,0,0,109,0,0,52,3,3,0,0,0,0,0,0,0,0,0,0,0,0,4,5,248,0,0,255,0,0,255,6,6,65,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,7,9,175,0,0,255,0,0,255,0,0,255,0,0,255,0,0,255,3,4,240,6,8,154,4,5,33,0,0,0,0,0,0,7,9,195,0,0,255,0,0,255,5,8,74,2,3,3,2,3,3,3,4,8,7,8,60,4,5,222,0,0,255,0,0,255,6,7,143,0,0,0,0,0,0,6,7,130,0,0,255,0,0,255,6,7,125,0,0,0,6,8,90,0,0,255,0,0,255,6,8,187,15,3,3,243,3,3,255,0,0,255,0,0,255,0,0,255,0,0,255,0,0,255,0,0,189,7,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,253,0,0,255,0,0,255,3,4,56,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,9,7,9,138,3,3,242,0,0,255,0,0,255,0,0,255,0,0,255,0,0,255,2,3,242,5,6,61,0,0,0,7,9,195,0,0,255,0,0,255,1,2,252,2,3,251,2,3,251,1,2,253,0,0,255,0,0,255,0,0,255,3,3,241,4,5,32,0,0,0,2,3,7,4,5,232,0,0,255,2,2,250,5,5,26,0,0,0,2,3,7,4,5,234,0,0,255,1,1,253,5,7,40,151,7,7,255,0,0,255,0,0,255,0,0,255,0,0,255,0,0,255,0,0,255,1,1,42,5,5,111,11,11,204,8,8,204,8,8,204,8,8,102,8,8,0,0,0,0,0,0,0,0,0,7,8,231,0,0,255,0,0,255,6,7,99,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,12,6,7,82,6,7,151,6,7,226,0,0,255,0,0,255,0,0,255,5,6,215,0,0,0,7,9,195,0,0,255,0,0,255,0,0,255,0,0,255,0,0,255,0,0,255,0,0,255,0,0,255,5,6,220,5,6,57,0,0,0,0,0,0,7,8,93,0,0,255,0,0,255,3,4,239,4,6,171,4,6,171,4,6,171,3,5,227,0,0,255,0,0,255,6,8,148,43,6,6,219,11,11,219,11,11,219,11,11,219,11,11,219,11,11,218,10,10,218,8,8,122,12,12,42,6,5,254,1,1,255,0,0,255,0,0,222,6,6,2,1,1,0,0,0,0,0,0,7,8,170,0,0,255,0,0,255,6,7,201,1,1,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,2,0,0,0,0,0,0,0,0,0,1,1,2,0,0,1,0,0,0,0,0,0,0,0,0,1,1,2,9,10,95,0,1,254,0,0,255,0,0,255,5,6,21,7,9,195,0,0,255,0,0,255,8,10,206,11,11,187,10,11,202,0,0,255,0,0,255,2,3,250,6,7,39,0,0,0,0,0,0,0,0,0,6,7,199,0,0,255,0,0,255,0,0,255,0,0,255,0,0,255,0,0,255,0,0,255,0,0,255,0,0,255,3,4,242,3,4,14,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,190,7,7,255,0,0,255,0,0,255,0,0,78,8,7,0,0,0,0,0,0,7,8,68,0,0,255,0,0,255,0,0,255,8,9,148,1,2,4,0,0,0,0,0,0,0,0,0,4,5,28,6,7,195,6,8,107,0,0,0,0,0,0,7,9,139,7,9,165,4,5,20,0,0,0,0,0,0,0,0,0,2,3,6,6,7,248,0,0,255,0,0,255,5,6,22,7,9,195,0,0,255,0,0,255,4,6,72,0,0,0,1,2,3,6,7,200,0,0,255,0,0,255,6,7,192,1,1,2,0,0,0,6,8,54,0,0,255,0,0,255,0,0,255,0,0,255,0,0,255,0,0,255,0,0,255,0,0,255,0,0,255,0,0,255,0,0,255,6,7,108,17,3,3,94,0,0,94,0,0,94,0,0,94,0,0,94,0,0,94,0,0,94,0,0,54,2,2,67,7,7,174,11,11,174,11,11,174,11,11,115,13,13,0,0,0,0,0,0,0,0,0,7,8,169,0,0,255,0,0,255,0,0,255,4,5,215,6,7,135,7,8,122,6,7,162,3,4,245,0,0,255,0,1,254,5,7,103,8,9,97,0,1,255,0,0,255,3,4,242,6,7,159,5,6,107,4,5,105,5,7,187,0,0,255,0,0,255,6,8,224,0,0,0,7,9,195,0,0,255,0,0,255,4,6,72,0,0,0,0,0,0,4,5,40,2,2,247,0,0,255,0,0,255,7,8,113,0,0,0,6,8,162,0,0,255,0,0,255,9,11,123,11,11,16,11,11,16,11,11,16,11,11,16,11,11,16,11,13,91,0,0,255,0,0,255,6,7,216,5,2,3,224,5,5,255,0,0,255,0,0,255,0,0,255,0,0,255,0,0,255,0,0,218,6,6,2,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,4,12,7,8,189,0,0,255,0,0,255,0,0,255,0,0,255,0,0,255,0,0,255,0,0,255,0,0,255,2,3,239,5,6,65,7,9,108,2,2,248,0,0,255,0,0,255,0,0,255,0,0,255,0,0,255,0,0,255,0,0,255,0,0,255,7,9,94,0,0,0,7,9,195,0,0,255,0,0,255,4,6,72,0,0,0,0,0,0,0,0,0,7,9,116,0,0,255,0,0,255,2,3,246,9,10,64,2,3,247,0,0,255,2,3,249,4,5,21,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,5,4,5,230,0,0,255,0,0,255,6,8,70,120,7,7,255,0,0,255,0,0,255,0,0,255,0,0,255,0,0,255,0,0,255,0,0,73,7,7,51,7,7,138,8,8,138,8,8,138,8,8,94,9,9,0,0,0,0,0,0,0,0,0,1,2,4,7,8,116,5,6,231,0,0,255,0,0,255,0,0,255,0,0,255,2,2,252,6,7,172,4,5,34,0,0,0,0,0,0,5,6,39,6,8,161,3,4,244,0,0,255,0,0,255,0,0,255,0,0,255,5,6,229,7,8,92,0,0,0,0,0,0,7,9,195,0,0,255,0,0,255,4,6,72,0,0,0,0,0,0,0,0,0,1,1,3,6,7,198,0,0,255,0,0,255,3,4,247,0,0,255,0,0,255,6,8,166,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,7,8,131,0,0,255,0,0,255,6,7,178,20,4,4,247,3,3,255,0,0,255,0,0,255,0,0,255,0,0,255,0,0,255,0,0,180,7,7,21,4,4,247,3,3,255,0,0,255,0,0,241,3,3,13,3,3,0,0,0,0,0,0,0,0,0,0,0,0,2,3,4,6,7,56,6,7,92,6,8,95,5,6,74,5,6,21,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,8,6,7,56,4,5,84,3,4,84,6,7,53,2,3,4,0,0,0,0,0,0,0,0,0,7,8,31,7,9,40,7,9,40,3,3,12,0,0,0,0,0,0,0,0,0,0,0,0,4,4,16,7,9,40,7,9,40,5,7,38,6,8,39,7,9,40,4,5,17,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,11,7,9,40,7,9,40,8,10,38,0,0,0,35,7,7,44,8,8,44,8,8,44,8,8,44,8,8,44,8,8,44,8,8,42,9,9,0,0,0,161,7,7,255,0,0,255,0,0,255,0,0,106,7,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,53,7,6,255,0,0,255,0,0,255,0,0,212,6,6
  /*
    0,0,0,0,0,0,0,0,0,4,9,12,9,37,54,10,55,81,9,62,93,6,61,92,11,62,91,9,50,73,9,30,42,2,3,3,0,0,0,0,0,0,0,0,0,6,15,20,9,43,63,10,58,86,14,67,97,10,60,88,10,51,74,8,32,47,4,7,10,0,0,0,0,0,0,11,43,61,7,49,73,7,49,73,7,49,73,7,49,73,7,49,73,7,49,73,9,49,71,8,37,54,6,15,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,5,6,13,58,83,11,59,86,11,59,86,7,16,22,12,36,50,11,59,86,11,59,86,11,59,86,11,59,86,11,59,86,11,59,86,11,59,86,6,16,21,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,27,37,8,60,89,5,60,91,5,60,91,5,60,91,5,60,91,5,60,91,5,60,91,5,60,91,10,54,80,4,12,16,0,0,0,6,22,31,7,60,91,5,60,91,5,60,91,5,60,91,5,60,91,5,60,91,5,60,91,8,59,88,8,25,35,0,0,0,11,52,76,5,60,91,5,60,91,5,60,91,5,60,91,5,60,91,5,60,91,5,60,91,5,60,91,6,61,91,10,35,49,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,29,41,5,60,91,5,60,91,5,60,91,9,42,61,5,12,16,6,61,91,5,60,91,5,60,91,5,60,91,5,60,91,5,60,91,5,60,91,9,42,61,0,0,0,14,8,8,15,8,8,15,8,8,15,8,8,2,2,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,27,38,6,61,92,5,60,91,5,60,91,5,60,91,10,60,88,9,56,82,7,61,91,5,60,91,5,60,91,5,60,91,9,29,41,2,4,5,9,59,87,5,60,91,5,60,91,8,58,87,8,49,73,10,58,86,5,60,91,5,60,91,6,61,91,7,20,27,0,0,0,11,52,76,5,60,91,5,60,91,6,61,92,7,61,92,7,61,92,6,61,92,5,60,91,5,60,91,5,60,91,6,60,91,8,22,30,0,0,0,0,0,0,0,0,0,1,1,1,10,54,80,5,60,91,5,60,91,5,60,91,7,60,90,4,8,10,10,48,70,5,60,91,5,60,91,5,60,91,5,60,91,5,60,91,5,60,91,8,60,90,4,7,9,171,35,33,236,41,39,236,41,39,236,41,39,85,20,19,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,9,12,8,60,89,5,60,91,5,60,91,8,55,81,8,21,28,1,1,1,0,0,0,4,7,8,9,35,50,7,60,91,10,39,55,0,0,0,7,20,28,5,60,91,5,60,91,10,57,84,3,5,6,0,0,0,1,1,1,7,19,26,10,51,74,10,39,56,0,0,0,0,0,0,11,52,76,5,60,91,5,60,91,11,28,37,9,9,10,9,9,10,7,8,9,8,20,26,8,55,81,5,60,91,5,60,91,9,44,65,0,0,0,0,0,0,0,0,0,7,20,27,5,60,91,5,60,91,7,61,92,5,60,91,5,60,91,9,33,48,6,17,24,6,39,57,6,39,57,6,39,57,6,39,57,6,39,57,6,39,57,6,39,57,6,18,24,70,17,16,236,41,39,236,41,39,236,41,39,183,37,35,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9,37,53,5,60,91,5,60,91,8,59,88,4,10,13,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,7,16,21,1,1,1,0,0,0,4,21,30,5,60,91,5,60,91,10,57,84,2,4,5,0,0,0,0,0,0,0,0,0,1,1,1,2,3,3,0,0,0,0,0,0,11,52,76,5,60,91,5,60,91,5,21,30,0,0,0,0,0,0,0,0,0,0,0,0,9,29,40,5,60,91,5,60,91,7,51,75,0,0,0,0,0,0,0,0,0,9,45,66,5,60,91,5,60,91,14,40,54,6,60,92,5,60,91,9,56,83,1,1,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,2,205,40,38,236,41,39,236,41,39,236,42,40,44,12,12,0,0,0,0,0,0,0,0,0,0,0,0,10,54,80,5,60,91,5,60,91,9,36,51,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,6,15,20,5,60,91,5,60,91,5,60,91,9,58,85,9,38,54,7,20,28,3,4,5,0,0,0,0,0,0,0,0,0,0,0,0,11,52,76,5,60,91,5,60,91,5,21,30,0,0,0,0,0,0,0,0,0,0,0,0,8,28,40,5,60,91,5,60,91,8,51,75,0,0,0,0,0,0,5,11,14,7,61,91,5,60,91,9,57,85,2,2,3,10,51,75,5,60,91,5,60,91,8,25,34,55,15,15,149,32,31,149,32,31,149,32,31,150,33,32,150,35,34,150,35,34,150,35,34,60,15,15,58,12,12,100,17,17,100,17,17,100,17,17,48,10,10,0,0,0,0,0,0,0,0,0,0,0,0,9,62,92,5,60,91,5,60,91,7,20,28,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,10,48,69,5,60,91,5,60,91,5,60,91,5,60,91,5,60,91,8,60,89,9,42,61,5,12,16,0,0,0,0,0,0,11,52,76,5,60,91,5,60,91,6,23,33,2,3,3,2,3,3,3,5,6,8,20,28,9,56,83,5,60,91,5,60,91,8,39,56,0,0,0,0,0,0,8,36,52,5,60,91,5,60,91,8,35,50,0,0,0,8,27,38,5,60,91,5,60,91,10,50,72,15,5,5,225,41,39,236,41,39,236,41,39,236,41,39,236,41,39,236,41,39,236,41,39,176,35,34,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,6,61,92,5,60,91,5,60,91,4,16,23,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,4,5,10,39,56,7,59,89,5,60,91,5,60,91,5,60,91,5,60,91,5,60,91,7,59,89,6,19,26,0,0,0,11,52,76,5,60,91,5,60,91,6,61,92,7,61,92,7,61,92,6,61,92,5,60,91,5,60,91,5,60,91,7,59,88,5,11,15,0,0,0,2,4,4,9,58,87,5,60,91,7,61,91,5,10,13,0,0,0,2,4,5,9,59,88,5,60,91,6,60,91,6,14,19,141,30,29,236,41,39,236,41,39,236,41,39,236,41,39,236,41,39,236,41,39,236,42,40,39,11,10,104,26,25,190,39,37,190,39,37,190,39,37,96,23,22,0,0,0,0,0,0,0,0,0,11,60,88,5,60,91,5,60,91,8,28,40,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,5,7,7,25,35,9,41,59,10,58,86,5,60,91,5,60,91,5,60,91,9,55,82,0,0,0,11,52,76,5,60,91,5,60,91,5,60,91,5,60,91,5,60,91,5,60,91,5,60,91,5,60,91,9,56,83,6,18,25,0,0,0,0,0,0,8,28,39,5,60,91,5,60,91,8,59,88,7,44,66,7,44,66,7,44,66,8,57,85,5,60,91,5,60,91,9,41,59,41,12,11,204,44,42,203,44,42,203,44,42,203,44,42,203,44,42,203,43,41,203,41,40,114,28,28,40,11,11,235,41,39,236,41,39,236,41,39,206,40,38,2,1,1,0,0,0,0,0,0,10,46,66,5,60,91,5,60,91,9,52,77,1,1,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,2,0,0,0,0,0,0,0,0,0,1,1,2,0,0,1,0,0,0,0,0,0,0,0,0,1,1,2,10,30,41,5,60,91,5,60,91,5,60,91,5,9,12,11,52,76,5,60,91,5,60,91,12,56,80,14,53,75,14,56,80,5,60,91,5,60,91,7,61,91,7,15,19,0,0,0,0,0,0,0,0,0,10,52,77,5,60,91,5,60,91,5,60,91,5,60,91,5,60,91,5,60,91,5,60,91,5,60,91,5,60,91,8,60,89,3,6,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,177,36,35,236,41,39,236,41,39,236,41,39,73,18,18,0,0,0,0,0,0,8,22,30,5,60,91,5,60,91,5,60,91,11,42,60,1,2,3,0,0,0,0,0,0,0,0,0,4,10,13,10,51,75,7,31,44,0,0,0,0,0,0,10,39,56,10,45,65,4,8,11,0,0,0,0,0,0,0,0,0,2,3,4,11,63,93,5,60,91,5,60,91,5,10,12,11,52,76,5,60,91,5,60,91,5,21,30,0,0,0,1,2,2,10,53,77,5,60,91,5,60,91,10,50,74,1,2,2,0,0,0,7,18,25,5,60,91,5,60,91,5,60,91,5,60,91,5,60,91,5,60,91,5,60,91,5,60,91,5,60,91,5,60,91,5,60,91,8,31,44,16,5,5,87,15,14,87,15,14,87,15,14,87,15,14,87,15,14,87,15,14,87,15,14,50,10,10,63,17,16,162,37,36,162,37,36,162,37,36,108,29,28,0,0,0,0,0,0,0,0,0,10,46,66,5,60,91,5,60,91,5,60,91,9,55,81,9,37,54,9,35,50,9,43,63,8,60,90,5,60,91,5,60,91,7,29,42,10,30,41,5,60,91,5,60,91,8,60,89,9,43,62,7,30,43,6,29,41,9,49,72,5,60,91,5,60,91,11,58,86,0,0,0,11,52,76,5,60,91,5,60,91,5,21,30,0,0,0,0,0,0,5,13,18,7,60,90,5,60,91,5,60,91,9,33,47,0,0,0,9,44,63,5,60,91,5,60,91,12,37,52,11,12,13,11,12,13,11,12,13,11,12,13,11,12,13,13,31,42,5,60,91,5,60,91,10,56,82,4,3,3,208,40,38,236,41,39,236,41,39,236,41,39,236,41,39,236,41,39,236,41,39,203,39,38,2,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,6,7,11,50,73,5,60,91,5,60,91,5,60,91,5,60,91,5,60,91,5,60,91,5,60,91,5,60,91,7,58,88,7,20,28,10,32,45,7,60,90,5,60,91,5,60,91,5,60,91,5,60,91,5,60,91,5,60,91,5,60,91,5,60,91,9,29,40,0,0,0,11,52,76,5,60,91,5,60,91,5,21,30,0,0,0,0,0,0,0,0,0,9,34,48,5,60,91,5,60,91,7,60,90,10,23,30,7,60,91,5,60,91,7,61,91,4,9,11,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,3,9,58,86,5,60,91,5,60,91,7,22,30,112,25,24,236,41,39,236,41,39,236,41,39,236,41,39,236,41,39,236,41,39,236,41,39,68,17,16,48,13,13,129,28,27,129,28,27,129,28,27,88,21,21,0,0,0,0,0,0,0,0,0,1,2,2,9,34,48,9,58,87,5,60,91,5,60,91,5,60,91,5,60,91,6,61,91,9,46,67,5,12,16,0,0,0,0,0,0,6,13,18,10,44,63,8,60,90,5,60,91,5,60,91,5,60,91,5,60,91,10,59,87,9,28,39,0,0,0,0,0,0,11,52,76,5,60,91,5,60,91,5,21,30,0,0,0,0,0,0,0,0,0,1,2,2,9,52,76,5,60,91,5,60,91,8,61,91,5,60,91,5,60,91,9,45,65,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9,37,53,5,60,91,5,60,91,10,47,69,19,6,6,229,42,40,236,41,39,236,41,39,236,41,39,236,41,39,236,41,39,236,41,39,168,34,33,20,7,6,229,42,40,236,41,39,236,41,39,224,41,39,12,4,4,0,0,0,0,0,0,0,0,0,0,0,0,2,3,3,7,18,25,7,27,38,7,28,40,7,22,31,5,9,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,4,5,7,19,25,5,23,33,5,23,33,7,18,24,2,3,3,0,0,0,0,0,0,0,0,0,7,13,17,8,16,20,8,16,20,3,5,7,0,0,0,0,0,0,0,0,0,0,0,0,4,7,9,8,16,20,8,16,20,5,14,19,7,15,20,8,16,20,4,7,9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,5,6,8,16,20,8,16,20,9,16,21,0,0,0,33,11,11,42,13,13,42,13,13,42,13,13,42,13,13,42,13,13,42,13,13,40,14,14,0,0,0,150,31,30,236,41,39,236,41,39,236,41,39,99,22,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,50,13,13,236,41,39,236,41,39,236,41,39,197,39,37*/
};  

void setup() {
  matrix.begin();
  matrix.setTextWrap(false); // Allow text to run off right edge
  matrix.setTextSize(2);
}

uint16_t drawRGB24toRGB565(uint8_t r, uint8_t g, uint8_t b)
{
  return ((r / 8) << 11) | ((g / 4) << 5) | (b / 8);
}

void draw_logo(int offset) {
  int i;
  int j;
  for(i=0;i<16;i++) {
    for(j=0;j<66;j++) {
      if ((j+offset)>=0 && (j+offset)<32) {
        byte r=pgm_read_byte_near(csra_logo+(i*66+j)*3);
        byte g=pgm_read_byte_near(csra_logo+(i*66+j)*3+1);
        byte b=pgm_read_byte_near(csra_logo+(i*66+j)*3+2);
        matrix.drawPixel(j+offset,i,drawRGB24toRGB565(r,g,b));
      }
    }
  }
}

void draw_logo2(int offset) {
  int i;
  int j;
  for(i=0;i<16;i++) {
    for(j=0;j<26;j++) {
      if ((j+offset)>=0 && (j+offset)<32) {
        byte r=pgm_read_byte_near(rad_logo+(i*26+j)*3);
        byte g=pgm_read_byte_near(rad_logo+(i*26+j)*3+1);
        byte b=pgm_read_byte_near(rad_logo+(i*26+j)*3+2);
        matrix.drawPixel(j+offset,i,drawRGB24toRGB565(r,g,b));
      }
    }
  }
}

void loop() {
  byte i;
  matrix.fillScreen(0);
  if (off>=-100) {
    delay(10);
    // Clear background
    draw_logo(off);
    draw_logo2(off+70);
    off--;
  } else {
    if (mode==2) {
      // Draw big scrolly text on top
      delay(10);
      matrix.setTextColor(matrix.ColorHSV(hue, 255, 255, true));
      matrix.setCursor(textX, 1);
      matrix.print(F2(str2));
      // Move text left (w/wrap), increase hue
      hue += 7;
      if(hue >= 1536) hue -= 1536;
      if((--textX) < textMin2) {
	textX = matrix.width();
	off=32;
	mode=(mode+1)%3;
      };
    } else {
      // Bounce three balls around
      for(i=0; i<3; i++) {
	// Draw 'ball'
	matrix.fillCircle(ball[i][0], ball[i][1], 5, pgm_read_word(&ballcolor[i]));
	// Update X, Y position
	ball[i][0] += ball[i][2];
	ball[i][1] += ball[i][3];
	// Bounce off edges
	if((ball[i][0] == 0) || (ball[i][0] == (matrix.width() - 1)))
	  ball[i][2] *= -1;
	if((ball[i][1] == 0) || (ball[i][1] == (matrix.height() - 1)))
	  ball[i][3] *= -1;
      }

      // Draw big scrolly text on top
      matrix.setTextColor(matrix.ColorHSV(hue, 255, 255, true));
      matrix.setCursor(textX, 1);
      matrix.print(F2(str));

      // Move text left (w/wrap), increase hue
      hue += 7;
      if(hue >= 1536) hue -= 1536;
      if((--textX) < textMin) {
	textX = matrix.width();
	off=32;
	mode=(mode+1)%3;
      };
    }
  }
  // Update display
  matrix.swapBuffers(false);
}
